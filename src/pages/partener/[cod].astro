---
import PillURL from "@/components/ui/pills/PillURL.astro"
import IconLink from "phosphor-astro/ArrowSquareOut.astro"
import GridProduse from "@/components/ui/produs/GridProduse.astro"
import PageHero from "@/components/ui/typography/PageHero.astro"
import BaseLayout from "@/layouts/BaseLayout.astro"
import { pb_to_proxy } from "@/lib/util"
import { Debug } from "astro:components"

import { getEntry } from "astro:content"

const { cod } = Astro.params
if (cod === undefined) {
  return Astro.redirect("/404")
}
const partener = await getEntry("parteneri", cod)
if (partener === undefined) {
  return Astro.redirect("/404")
}

const { id, nume, descriere, logo, url } = partener.data
const logo_src = pb_to_proxy(logo!)
---

<BaseLayout title={nume}>
  <PageHero title={`Partener: ${nume}`}>
    <div class="flex max-w-5xl flex-col sm:flex-row">
      <div class="">
        <p class="text-xl">{descriere}</p>
        <a class="" href={url} target="_blank"><IconLink class="-mt-1 mr-1 inline-block size-6" />{url}</a>
      </div>
      <img class="mx-auto" src={logo_src} alt={nume} width="300" />
    </div>
  </PageHero>

  <GridProduse parteneri={[id]} />
</BaseLayout>
