---
import PageHero from "@/components/ui/typography/PageHero.astro"

import BaseLayout from "@/layouts/BaseLayout.astro"
import { pb_to_proxy } from "@/lib/util"
import { getCollection } from "astro:content"

const allMateriale = (await getCollection("materiale")).map((mater) => {
  const imagine_url = pb_to_proxy(mater.data.imagine!)
  return { imagine_url, ...mater }
})
---

<BaseLayout>
  <PageHero title="Materiale" />

  <ul class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
    {
      allMateriale.map((categ) => {
        const { denumire, icon, imagine, descriere, slug } = categ.data
        return (
          <li class="bg-muted">
            <a href={`/m/${slug}`} class="group block overflow-hidden">
              <img
                src={`${categ.imagine_url}?thumb=400x400f`}
                alt=""
                class="h-[300px] w-full object-cover transition duration-500 group-hover:scale-105 sm:h-[350px]"
              />

              <div class="px-1 pt-2">
                <h3 class="text-xl group-hover:underline group-hover:decoration-pink-500 group-hover:decoration-2 group-hover:underline-offset-4">
                  {denumire}
                </h3>
                {descriere && <p>{descriere}</p>}
              </div>
            </a>
          </li>
        )
      })
    }
  </ul>
</BaseLayout>
