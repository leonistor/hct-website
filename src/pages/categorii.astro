---
import BaseLayout from "@/layouts/BaseLayout.astro"
import { getCollection } from "astro:content"

const allCategorii = (await getCollection("categorii")).map((categ) => {
  const imagine_url = categ.data.imagine?.replace("http://127.0.0.1:8090", "/pocket")
  return { imagine_url, ...categ }
})
---

<BaseLayout>
  <!-- TODO: imagine si descriere -->
  <div class="prose dark:prose-invert prose-lg my-6">
    <h1>Categorii</h1>
  </div>

  <ul class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
    {
      allCategorii.map((categ) => {
        const { nume, icon, descriere, imagine, slug } = categ.data
        return (
          <li class="bg-muted">
            <a href={`/c/${slug}`} class="group block overflow-hidden">
              <img
                src={`${categ.imagine_url}`}
                alt=""
                class="h-[300px] w-full object-cover transition duration-500 group-hover:scale-105 sm:h-[350px]"
              />

              <div class="px-1 pt-2">
                <h3 class="text-xl group-hover:underline group-hover:decoration-pink-500 group-hover:decoration-2 group-hover:underline-offset-4">
                  {nume}
                </h3>
                {descriere && <p>{descriere}</p>}
              </div>
            </a>
          </li>
        )
      })
    }
  </ul>
</BaseLayout>
